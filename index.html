
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Golf Bet Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    h2 {
      margin-top: 30px;
    }
    .controls, .player-inputs, .results {
      margin-bottom: 20px;
    }
    input[type="number"] {
      width: 60px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 6px;
      text-align: center;
    }
    .button-group button {
      margin: 0 5px;
    }
    .player-card {
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

<h1>Golf Bet Calculator</h1>

<div class="controls">
  <label>Number of Players:
    <button id="numPlayersDecrease">-</button>
    <span id="numPlayersDisplay">4</span>
    <button id="numPlayersIncrease">+</button>
  </label>
  <br><br>
  <label>Skin Value:
    <button id="skinValueDecrease">-</button>
    <span id="skinValueDisplay">5</span>
    <button id="skinValueIncrease">+</button>
  </label>
  <br><br>
  <button id="startGameBtn">Start Game</button>
</div>

<div class="player-inputs" id="playerInputs"></div>

<h2>Hole <span id="holeNumber">1</span></h2>
<div class="results">
  <table id="resultsTable">
    <thead>
      <tr>
        <th>Player</th>
        <th>Handicap</th>
        <th>Strokes</th>
        <th>Bonus</th>
        <th>Penalty</th>
        <th>Money (This Hole)</th>
        <th>Total Money</th>
      </tr>
    </thead>
    <tbody id="resultsBody">
    </tbody>
  </table>
</div>

<script>
(function () {
  let numPlayers = 4;
  let skinValue = 5;
  let holeNumber = 1;
  let players = [];
  let gameStarted = false;

  const maxPlayers = 10;
  const minPlayers = 2;
  const minSkin = 1;
  const maxSkin = 100;

  const playerInputsDiv = document.getElementById("playerInputs");
  const resultsBody = document.getElementById("resultsBody");
  const holeNumberSpan = document.getElementById("holeNumber");

  const numPlayersDisplay = document.getElementById("numPlayersDisplay");
  const skinValueDisplay = document.getElementById("skinValueDisplay");

  function createPlayer(index) {
    return {
      name: "Player " + (index + 1),
      strokes: 0,
      bonus: 0,
      penalty: 0,
      handicap: 0,
      money: 0,
    };
  }

  function renderPlayerInputs() {
    playerInputsDiv.innerHTML = "";
    players = [];
    for (let i = 0; i < numPlayers; i++) {
      const player = createPlayer(i);
      players.push(player);

      const div = document.createElement("div");
      div.className = "player-card";
      div.innerHTML = `
        <strong>Name:</strong> <input type="text" value="${player.name}" onchange="this.player.name = this.value"><br>
        <strong>Handicap:</strong> <input type="number" value="${player.handicap}" onchange="this.player.handicap = parseInt(this.value) || 0">
      `;
      div.querySelectorAll("input").forEach(input => input.player = player);
      playerInputsDiv.appendChild(div);
    }
  }

  function calculateHandicapCompensation() {
    for (let i = 0; i < players.length; i++) {
      for (let j = 0; j < players.length; j++) {
        if (i === j) continue;
        const diff = players[j].handicap - players[i].handicap;
        if (diff > 0) {
          const compensation = Math.round(diff * 0.7);
          players[i].money -= compensation * skinValue;
          players[j].money += compensation * skinValue;
        }
      }
    }
  }

  function calculateHoleResults() {
    const holeMoney = new Array(players.length).fill(0);

    for (let i = 0; i < players.length; i++) {
      const p1 = players[i];
      for (let j = 0; j < players.length; j++) {
        if (i === j) continue;
        const p2 = players[j];
        const diff = p1.strokes - p2.strokes;

        if (diff < 0) {
          // p1 wins
          holeMoney[i] += skinValue * (1 + Math.abs(diff));
          holeMoney[j] -= skinValue * (1 + Math.abs(diff));
        }
      }
    }

    // Apply bonus and penalties
    for (let i = 0; i < players.length; i++) {
      const p = players[i];
      const others = players.length - 1;
      const bonus = p.bonus * skinValue * others;
      const penalty = p.penalty * skinValue * others;

      holeMoney[i] += bonus - penalty;

      for (let j = 0; j < players.length; j++) {
        if (i === j) continue;
        holeMoney[j] -= bonus / others;
        holeMoney[j] += penalty / others;
      }
    }

    for (let i = 0; i < players.length; i++) {
      players[i].money += holeMoney[i];
    }

    return holeMoney;
  }

  function renderResults(holeMoney = []) {
    resultsBody.innerHTML = "";
    players.forEach((player, i) => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${player.name}</td>
        <td>${player.handicap}</td>
        <td>
          <button onclick="players[${i}].strokes--;update()">-</button>
          ${player.strokes}
          <button onclick="players[${i}].strokes++;update()">+</button>
        </td>
        <td>
          <button onclick="players[${i}].bonus--;update()">-</button>
          ${player.bonus}
          <button onclick="players[${i}].bonus++;update()">+</button>
        </td>
        <td>
          <button onclick="players[${i}].penalty--;update()">-</button>
          ${player.penalty}
          <button onclick="players[${i}].penalty++;update()">+</button>
        </td>
        <td>$${holeMoney[i]?.toFixed(2) || "0.00"}</td>
        <td>$${player.money.toFixed(2)}</td>
      `;
      resultsBody.appendChild(row);
    });
  }

  window.update = function () {
    const holeMoney = calculateHoleResults();
    renderResults(holeMoney);
  };

  document.getElementById("numPlayersDecrease").onclick = () => {
    if (numPlayers > minPlayers) {
      numPlayers--;
      numPlayersDisplay.textContent = numPlayers;
      renderPlayerInputs();
    }
  };

  document.getElementById("numPlayersIncrease").onclick = () => {
    if (numPlayers < maxPlayers) {
      numPlayers++;
      numPlayersDisplay.textContent = numPlayers;
      renderPlayerInputs();
    }
  };

  document.getElementById("skinValueDecrease").onclick = () => {
    if (skinValue > minSkin) {
      skinValue--;
      skinValueDisplay.textContent = skinValue;
    }
  };

  document.getElementById("skinValueIncrease").onclick = () => {
    if (skinValue < maxSkin) {
      skinValue++;
      skinValueDisplay.textContent = skinValue;
    }
  };

  document.getElementById("startGameBtn").onclick = () => {
    if (!gameStarted) {
      gameStarted = true;
      calculateHandicapCompensation();
      update();
    } else {
      holeNumber++;
      holeNumberSpan.textContent = holeNumber;
      players.forEach(p => {
        p.strokes = 0;
        p.bonus = 0;
        p.penalty = 0;
      });
      update();
    }
  };

  renderPlayerInputs();
})();
</script>

</body>
</html>
